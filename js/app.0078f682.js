(function(){"use strict";var e={6449:function(e,t,o){var a=o(5130),n=o(2261),r=o(6768),s=o(144),l=o(4232),u=(o(3110),o(8335),o(4373));const c=u.A.create({baseURL:"http://localhost:3001"});var i=c;const d=(0,n.nY)("auth",{state:()=>({user:JSON.parse(localStorage.getItem("user"))||null}),actions:{async login(e,t){try{const o=await i.get(`/users?username=${e}&password=${t}`);return!!o.data.length&&(this.user=o.data[0],localStorage.setItem("user",JSON.stringify(this.user)),!0)}catch(o){return console.error(o),!1}},logout(){confirm("Точно вийти?")&&(this.user=null,localStorage.removeItem("user"))},async register(e,t){try{const o=await i.get(`/users?username=${e}`);if(o.data.length)return!1;const a=await i.post("/users",{username:e,password:t});return this.user=a.data,localStorage.setItem("user",JSON.stringify(this.user)),!0}catch(o){return console.error(o),!1}}}}),b={class:"navbar navbar-dark bg-dark px-3"},v={key:0},m={class:"text-light me-3"},p={key:1};var k={__name:"AppNavbar",setup(e){const t=d();return(e,o)=>{const a=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("nav",b,[(0,r.bF)(a,{class:"navbar-brand",to:"/"},{default:(0,r.k6)(()=>[...o[1]||(o[1]=[(0,r.eW)(" Book Shelf",-1)])]),_:1}),(0,s.R1)(t).user?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("span",m,(0,l.v_)((0,s.R1)(t).user.username),1),(0,r.Lk)("button",{class:"btn btn-outline-light",onClick:o[0]||(o[0]=(...e)=>(0,s.R1)(t).logout&&(0,s.R1)(t).logout(...e))},"Logout")])):((0,r.uX)(),(0,r.CE)("div",p,[(0,r.bF)(a,{class:"btn btn-outline-light me-2",to:"/login"},{default:(0,r.k6)(()=>[...o[2]||(o[2]=[(0,r.eW)("Login",-1)])]),_:1}),(0,r.bF)(a,{class:"btn btn-outline-light",to:"/register"},{default:(0,r.k6)(()=>[...o[3]||(o[3]=[(0,r.eW)("Register",-1)])]),_:1})]))])}}};const f=k;var h=f;const g={class:"container mt-4"};var y={__name:"App",setup(e){return(e,t)=>{const o=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(h),(0,r.Lk)("div",g,[(0,r.bF)(o)])],64)}}};const L=y;var _=L,w=o(8728);o(4114),o(8111),o(2489);const R=(0,n.nY)("books",{state:()=>({books:[],loading:!1}),actions:{async fetchBooks(){this.loading=!0;try{const e=await i.get("/books");this.books=e.data}catch(e){console.error("Fetch books error:",e)}finally{this.loading=!1}},async addBook(e){const t=await i.post("/books",e);this.books.push(t.data)},async editBook(e,t){const o={...t,id:e},a=await i.put(`/books/${e}`,o),n=this.books.findIndex(t=>t.id===e);-1!==n&&(this.books[n]=a.data)},async deleteBook(e){await i.delete(`/books/${e}`),this.books=this.books.filter(t=>t.id!==e)}}}),x={class:"col-md-4 mb-3"},C={class:"card h-100"},E={class:"card-body"},O={class:"card-title"},S={class:"card-subtitle mb-2 text-muted"},V={class:"card-text"};var K={__name:"BookCard",props:{book:{type:Object,required:!0}},setup(e){const t=e,o=R(),a=async()=>{const e=confirm(`Ви впевнені, що хочете видалити книгу "${t.book.title}"?`);e&&await o.deleteBook(t.book.id)};return(t,o)=>{const n=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",x,[(0,r.Lk)("div",C,[(0,r.Lk)("div",E,[(0,r.Lk)("h5",O,(0,l.v_)(e.book.title),1),(0,r.Lk)("h6",S,(0,l.v_)(e.book.author)+" ("+(0,l.v_)(e.book.year)+") ",1),(0,r.Lk)("p",V,(0,l.v_)(e.book.description),1),(0,r.bF)(n,{to:`/book/${e.book.id}`,class:"btn btn-primary btn-sm me-2"},{default:(0,r.k6)(()=>[...o[0]||(o[0]=[(0,r.eW)(" Деталі ",-1)])]),_:1},8,["to"]),(0,r.Lk)("button",{class:"btn btn-danger btn-sm",onClick:a}," Видалити ")])])])}}};const U=K;var X=U;const F={class:"mb-2"},J={class:"mb-2"},q={class:"mb-2"},B={class:"mb-2"};var $={__name:"BookForm",setup(e){const t=R(),o=(0,s.KR)(""),n=(0,s.KR)(""),l=(0,s.KR)(""),u=(0,s.KR)(""),c=(0,s.KR)(""),i=async()=>{await t.addBook({title:o.value,author:n.value,year:l.value,description:u.value,image:c.value||null}),o.value="",n.value="",l.value="",u.value="",c.value=""};return(e,t)=>((0,r.uX)(),(0,r.CE)("form",{onSubmit:(0,a.D$)(i,["prevent"]),class:"mb-4 book-form"},[(0,r.Lk)("div",F,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",class:"form-control",placeholder:"Назва",required:""},null,512),[[a.Jo,o.value]])]),(0,r.Lk)("div",J,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),type:"text",class:"form-control",placeholder:"Автор",required:""},null,512),[[a.Jo,n.value]])]),(0,r.Lk)("div",q,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),type:"number",class:"form-control",placeholder:"Рік видання",required:""},null,512),[[a.Jo,l.value]])]),(0,r.Lk)("div",B,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),class:"form-control",placeholder:"Опис",required:""},null,512),[[a.Jo,u.value]])]),t[4]||(t[4]=(0,r.Lk)("button",{type:"submit",class:"btn btn-success"}," Додати книгу ",-1))],32))}};const j=$;var D=j;const I={class:"container mt-4"};var P={__name:"HomeView",setup(e){const t=R(),o=async()=>{await t.fetchBooks()};return(0,r.sV)(o),(e,n)=>((0,r.uX)(),(0,r.CE)("div",I,[n[0]||(n[0]=(0,r.Lk)("h1",{class:"mb-3"},"Книжкова полиця",-1)),(0,r.bF)(D,{onBookAdded:o}),(0,r.bF)(a.F,{name:"book",tag:"div",class:"row"},{default:(0,r.k6)(()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,s.R1)(t).books,e=>((0,r.uX)(),(0,r.Wv)(X,{key:e.id,book:e,onDeleted:o},null,8,["book"]))),128))]),_:1})]))}},A=o(1241);const W=(0,A.A)(P,[["__scopeId","data-v-e34c5782"]]);var N=W;const T={key:0,class:"text-muted"},M={key:1,class:"text-danger"},H={key:2,class:"card"},Q={class:"card-body"},Y={class:"mb-2"},z={class:"mb-2"},G={class:"mb-2"},Z={class:"mb-2"};var ee={__name:"BookDetails",setup(e){const t=(0,w.lq)(),o=(0,w.rd)(),n=R(),l=t.params.id,u=(0,s.KR)(!0),c=(0,s.KR)(!1),d=(0,s.Kh)({title:"",author:"",year:"",description:""});(0,r.sV)(async()=>{try{const e=await i.get(`/books/${l}`);Object.assign(d,e.data),u.value=!1}catch(e){c.value=!0,u.value=!1}});const b=async()=>{await n.editBook(l,d),o.push("/")};return(e,t)=>{const o=(0,r.g2)("router-link");return u.value?((0,r.uX)(),(0,r.CE)("div",T," Завантаження... ")):c.value?((0,r.uX)(),(0,r.CE)("div",M," Книгу не знайдено ")):((0,r.uX)(),(0,r.CE)("div",H,[(0,r.Lk)("div",Q,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"card-title mb-3"},"Редагування книги",-1)),(0,r.Lk)("form",{onSubmit:(0,a.D$)(b,["prevent"])},[(0,r.Lk)("div",Y,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.title=e),class:"form-control",placeholder:"Назва",required:""},null,512),[[a.Jo,d.title]])]),(0,r.Lk)("div",z,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.author=e),class:"form-control",placeholder:"Автор",required:""},null,512),[[a.Jo,d.author]])]),(0,r.Lk)("div",G,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.year=e),type:"number",class:"form-control",placeholder:"Рік",required:""},null,512),[[a.Jo,d.year]])]),(0,r.Lk)("div",Z,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>d.description=e),class:"form-control",placeholder:"Опис",required:""},null,512),[[a.Jo,d.description]])]),t[5]||(t[5]=(0,r.Lk)("button",{class:"btn btn-success me-2"}," Зберегти ",-1)),(0,r.bF)(o,{to:"/",class:"btn btn-secondary"},{default:(0,r.k6)(()=>[...t[4]||(t[4]=[(0,r.eW)(" Назад ",-1)])]),_:1})],32)])]))}}};const te=ee;var oe=te;const ae={class:"col-md-4 mx-auto"},ne={key:0,class:"text-danger mt-2"};var re={__name:"LoginView",setup(e){const t=(0,s.KR)(""),o=(0,s.KR)(""),n=(0,s.KR)(null),u=d(),c=(0,w.rd)(),i=async()=>{try{const e=await u.login(t.value,o.value);e?c.push("/"):n.value="Невірний username або пароль"}catch(e){n.value="Помилка при вході",console.error(e)}};return(e,s)=>((0,r.uX)(),(0,r.CE)("div",ae,[s[3]||(s[3]=(0,r.Lk)("h2",{class:"mb-3"},"Login",-1)),(0,r.Lk)("form",{onSubmit:(0,a.D$)(i,["prevent"])},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),type:"text",class:"form-control mb-2",placeholder:"Username",required:""},null,512),[[a.Jo,t.value]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.value=e),type:"password",class:"form-control mb-3",placeholder:"Password",required:""},null,512),[[a.Jo,o.value]]),s[2]||(s[2]=(0,r.Lk)("button",{class:"btn btn-primary w-100"},"Login",-1))],32),n.value?((0,r.uX)(),(0,r.CE)("p",ne,(0,l.v_)(n.value),1)):(0,r.Q3)("",!0)]))}};const se=re;var le=se;const ue={class:"col-md-4 mx-auto"},ce={key:0,class:"text-danger mt-2"};var ie={__name:"RegisterView",setup(e){const t=(0,s.KR)(""),o=(0,s.KR)(""),n=(0,s.KR)(null),u=d(),c=(0,w.rd)(),i=async()=>{try{if(t.value.length<3)return void(n.value="Username має бути мінімум 3 символи");if(o.value.length<8)return void(n.value="Password має бути мінімум 8 символів");const e=await u.register(t.value,o.value);e?c.push("/"):n.value="Такий username вже існує"}catch(e){n.value="Помилка при реєстрації",console.error(e)}};return(e,s)=>((0,r.uX)(),(0,r.CE)("div",ue,[s[3]||(s[3]=(0,r.Lk)("h2",{class:"mb-3"},"Register",-1)),(0,r.Lk)("form",{onSubmit:(0,a.D$)(i,["prevent"])},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),type:"text",class:"form-control mb-2",placeholder:"Username (мін. 3 символи)",required:""},null,512),[[a.Jo,t.value]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.value=e),type:"password",class:"form-control mb-3",placeholder:"Password (мін. 8 символів)",required:""},null,512),[[a.Jo,o.value]]),s[2]||(s[2]=(0,r.Lk)("button",{class:"btn btn-success w-100"},"Register",-1))],32),n.value?((0,r.uX)(),(0,r.CE)("p",ce,(0,l.v_)(n.value),1)):(0,r.Q3)("",!0)]))}};const de=ie;var be=de;const ve=[{path:"/",name:"Home",component:N},{path:"/book/:id",name:"BookDetails",component:oe},{path:"/login",name:"Login",component:le},{path:"/register",name:"Register",component:be}],me=(0,w.aE)({history:(0,w.LA)(),routes:ve});var pe=me;const ke=(0,a.Ef)(_);ke.use((0,n.Ey)()),ke.use(pe),ke.mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,r){if(!a){var s=1/0;for(i=0;i<e.length;i++){a=e[i][0],n=e[i][1],r=e[i][2];for(var l=!0,u=0;u<a.length;u++)(!1&r||s>=r)&&Object.keys(o.O).every(function(e){return o.O[e](a[u])})?a.splice(u--,1):(l=!1,r<s&&(s=r));if(l){e.splice(i--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[a,n,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,s=a[0],l=a[1],u=a[2],c=0;if(s.some(function(t){return 0!==e[t]})){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(u)var i=u(o)}for(t&&t(a);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(i)},a=self["webpackChunkbook_shelf"]=self["webpackChunkbook_shelf"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],function(){return o(6449)});a=o.O(a)})();
//# sourceMappingURL=app.0078f682.js.map